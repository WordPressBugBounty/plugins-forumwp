var fmwp_topics_page=2,fmwp_no_topics_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No topics have been created.","forumwp")+"</span>",fmwp_no_topics_search_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No results found.","forumwp")+"</span>";function fmwp_get_topics(s,e){fmwp_set_busy("topics_list",!0);var p={tag:s.data("topic_tag_id"),status:s.data("status"),type:s.data("type"),page:e.page,order:e.order,nonce:fmwp_front_data.nonce};e.search&&(p.search=e.search),wp.ajax.send("fmwp_get_topics",{data:p,success:function(p){p.length?(s.siblings(".fmwp-topics-wrapper-heading").removeClass("fmwp-no-actions-heading"),p=wp.template("fmwp-topics-list")({topics:p}),s.find(".fmwp-load-more").remove(),1===e.page?s.html(p+'<span class="fmwp-load-more"></span>'):s.append(p+'<span class="fmwp-load-more"></span>'),fmwp_topics_page=parseInt(e.page)+1):(s.find(".fmwp-load-more").remove(),1===e.page&&(e.search?s.html(fmwp_no_topics_search_template):s.html(fmwp_no_topics_template),s.siblings(".fmwp-topics-wrapper-heading").addClass("fmwp-no-actions-heading"))),fmwp_set_busy("topics_list",!1)},error:function(p){console.log(p),fmwp_set_busy("topics_list",!1)}})}jQuery(document).ready(function(a){a(".fmwp-topics-wrapper").each(function(){var p=a(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-sort").val();fmwp_get_topics(a(this),{page:1,order:p})}),a(window).scroll(function(){var p,s,e,t={allow:!0,reallow:function(){t.allow=!0},delay:400};!fmwp_is_busy("topics_list")&&t.allow&&(t.allow=!1,p=a(".fmwp-topics-wrapper .fmwp-load-more"),s=a(".fmwp-topics-wrapper").parents(".fmwp-archive-topics-wrapper").data("fmwp_search"),e=a(".fmwp-topics-wrapper").parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-sort").val(),p.length)&&(setTimeout(t.reallow,t.delay),p.offset().top-a(window).scrollTop()<1e3)&&fmwp_get_topics(a(".fmwp-topics-wrapper"),{page:fmwp_topics_page,order:e,search:s})}),a(document.body).on("change",".fmwp-topics-sort",function(p){var s;p.preventDefault(),fmwp_is_busy("topics_list")||(p=a(this).val(),s=a(this).parents(".fmwp-archive-topics-wrapper").data("fmwp_search"),fmwp_topics_page=1,fmwp_get_topics(a(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-wrapper"),{page:1,search:s,order:p}))}),a(document.body).on("click",".fmwp-search-topic",function(p){if(p.preventDefault(),!fmwp_is_busy("topics_list")){var p=a(this).siblings("label").find(".fmwp-topics-search-line").val(),s=a(this).parents(".fmwp-archive-topics-wrapper").data("fmwp_search");if(void 0===s&&""===p||s===p)return!1;a(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-search-line").val(p),a(this).parents(".fmwp-archive-topics-wrapper").data("fmwp_search",p);s=a(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-sort").val();fmwp_topics_page=1,fmwp_get_topics(a(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-wrapper"),{page:1,search:p,order:s})}}),a(document.body).on("keypress",".fmwp-topics-search-line",function(p){13===p.which&&a(this).parents("label").siblings(".fmwp-search-topic").trigger("click")}),a(document.body).on("click",".fmwp-search-toggle",function(p){p.preventDefault(),a(this).parents(".fmwp-topics-list-head-mobile").find(".fmwp-search-wrapper").is(":visible")?(a(this).removeClass("fmwp-active"),a(this).parents(".fmwp-topics-list-head-mobile").find(".fmwp-search-wrapper").css("display","none")):(a(this).parents(".fmwp-topics-list-head-mobile").find(".fmwp-search-wrapper").css("display","flex"),a(this).addClass("fmwp-active"))})});