var fmwp_forum_categories_page=2,fmwp_forum_categories_loading=!1,fmwp_no_forum_categories_template='<span class="fmwp-no-forum-categories">'+wp.i18n.__("No one created the forum categories.","forumwp")+"</span>",fmwp_no_forum_categories_search_template='<span class="fmwp-no-forum-categories">'+wp.i18n.__("No results found.","forumwp")+"</span>";function fmwp_get_forum_categories(a,r){fmwp_forum_categories_loading=!0;var e={nonce:fmwp_front_data.nonce};1!==r.page&&(e.offset=a.data("fmwp_offset"),e.child_offset=a.data("fmwp_child_offset")),r.search&&(e.search=r.search),wp.ajax.send("fmwp_get_forum_categories",{data:e,success:function(e){var o;e.categories.length?(o=wp.template("fmwp-forum-categories-list")({categories:e.categories}),a.data("fmwp_offset",e.pagination.offset),a.data("fmwp_child_offset",e.pagination.child_offset),a.find(".fmwp-load-more").remove(),1===r.page?a.html(o+'<span class="fmwp-load-more"></span>'):a.append(o+'<span class="fmwp-load-more"></span>'),fmwp_forum_categories_page=parseInt(r.page)+1):(a.find(".fmwp-load-more").remove(),1===r.page&&(r.search?a.html(fmwp_no_forum_categories_search_template):a.html(fmwp_no_forum_categories_template))),fmwp_forum_categories_loading=!1,wp.hooks.doAction("fmwp_forum_categories_load_finish")},error:function(e){console.log(e)}})}jQuery(document).ready(function(r){r(".fmwp-forum-categories-wrapper").each(function(){fmwp_get_forum_categories(r(this),{page:1})}),r(window).on("scroll",function(){var e,o,a={allow:!0,reallow:function(){a.allow=!0},delay:400};!fmwp_forum_categories_loading&&a.allow&&(a.allow=!1,e=r(".fmwp-forum-categories-wrapper").parents(".fmwp-archive-forums-wrapper").find(".fmwp-forum-categories-search-line").val(),(o=r(".fmwp-forum-categories-wrapper .fmwp-load-more")).length)&&(setTimeout(a.reallow,a.delay),o.offset().top-r(window).scrollTop()<1e3)&&fmwp_get_forum_categories(r(".fmwp-forum-categories-wrapper"),{page:fmwp_forum_categories_page,search:e})}),r(document.body).on("click",".fmwp-search-forum-category",function(e){e.preventDefault();var e=r(this).siblings("label").find(".fmwp-forum-categories-search-line").val(),o=r(this).parents(".fmwp-forum-categories-list-head").data("fmwp_search");if(void 0===o&&""===e||o===e)return!1;r(this).parents(".fmwp-forum-categories-list-head").data("fmwp_search",e),fmwp_get_forum_categories(r(this).parents(".fmwp-forum-categories-list-head").siblings(".fmwp-forum-categories-wrapper"),{page:1,search:e})}),r(document.body).on("keypress",".fmwp-forum-categories-search-line",function(e){13===e.which&&r(this).siblings(".fmwp-search-forum-category").trigger("click")})});