jQuery(document).ready(function(e){fmwp_init_tags_suggest(e("#fmwp-topic-tags")),e(document.body).on("click",".fmwp-edit-topic",function(t){var p,i,s;t.preventDefault(),fmwp_is_busy("topics_list")||(p=e("#fmwp-topic-popup-wrapper"),i=e("#fmwptopiccontent"),s=e(this).closest(".fmwp-topic-row").data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_get_topic",{data:{topic_id:s,nonce:fmwp_front_data.nonce},success:function(t){var o;fmwp_init_tags_suggest(e('input[name="fmwp-topic[tags]"]')),p.find('input[name="fmwp-action"]').val("edit-topic"),p.find('input[name="fmwp-topic[topic_id]"]').val(s),p.find('input[name="fmwp-topic[title]"]').val(t.title),p.find('input[name="fmwp-topic[tags]"]').val(t.tags),wp.hooks.doAction("fmwp_on_open_edit_topic_popup",t,p),"undefined"!=typeof tinymce&&(o=tinymce.get("fmwptopiccontent"))&&o instanceof tinymce.Editor&&o.setContent(t.orig_content,{format:"html"}),i.val(t.orig_content).trigger("keyup"),e("#fmwptopiccontent-preview").html(t.content),p.trigger("fmwp_topic_popup_loaded",{data:t}),p.find("input, #wp-fmwptopiccontent-wrap").removeClass("fmwp-error-field").removeAttr("title"),p.is(":visible")?(i.focus(),e(document).trigger("fmwp_edit_topic")):p.show(1,function(){i.focus(),fmwp_resize_popup(),fmwp_responsive(),e(document).trigger("fmwp_edit_topic")}),p.data("fmwp-target","topics-page"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-create-topic",function(t){var o;t.preventDefault(),fmwp_is_busy("topics_list")||(t=e("#fmwp-topic-popup-wrapper"),o=e("#fmwptopiccontent"),t.is(":visible")?o.focus():(t.find('input[name="fmwp-action"]').val("create-topic"),t.find('input[name="fmwp-topic[topic_id]"]').val(""),o.val("").trigger("keyup"),t.find("input, #wp-fmwptopiccontent-wrap").removeClass("fmwp-error-field").removeAttr("title"),t.show(1,function(){o.focus(),fmwp_resize_popup(),fmwp_responsive(),e(document).trigger("fmwp_create_topic")})))}),e(document.body).on("click",".fmwp-report-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("topics_list")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_report_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.addClass("fmwp-topic-reported"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-unreport-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("topics_list")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_unreport_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.removeClass("fmwp-topic-reported"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-clear-reports-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("individual_forum")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("individual_forum",!0),wp.ajax.send("fmwp_clear_reports_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.removeClass("fmwp-topic-reported"),fmwp_set_busy("individual_forum",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("individual_forum",!1)}}))}),e(document.body).on("click",".fmwp-mark-spam-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("topics_list")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_mark_spam_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.data("spam",!0).addClass("fmwp-topic-spam"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-restore-spam-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("topics_list")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_restore_spam_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.data("spam",!1).removeClass("fmwp-topic-spam"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-lock-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("topics_list")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_lock_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.data("locked",!0).addClass("fmwp-topic-locked"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-unlock-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("topics_list")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_unlock_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.data("locked",!1).removeClass("fmwp-topic-locked"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-pin-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("topics_list")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_pin_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.data("pinned",!0).addClass("fmwp-topic-pinned"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-unpin-topic",function(t){var o,p;t.preventDefault(),fmwp_is_busy("topics_list")||(o=e(this),t=(p=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_unpin_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){fmwp_rebuild_dropdown(t,o),p.data("pinned",!1).removeClass("fmwp-topic-pinned"),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))}),e(document.body).on("click",".fmwp-trash-topic",function(t){var o;t.preventDefault(),fmwp_is_busy("topics_list")||(e(this),t=(o=e(this).closest(".fmwp-topic-row")).data("topic_id"),fmwp_set_busy("topics_list",!0),wp.ajax.send("fmwp_trash_topic",{data:{topic_id:t,nonce:fmwp_front_data.nonce},success:function(t){o.remove(),fmwp_set_busy("topics_list",!1)},error:function(t){console.log(t),e(this).fmwp_notice({message:t,type:"error"}),fmwp_set_busy("topics_list",!1)}}))})});