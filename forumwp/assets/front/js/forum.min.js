var fmwp_topics_page=2,fmwp_no_topics_template=fmwp_front_data.can_topic?'<span class="fmwp-forum-no-topics">'+wp.i18n.__('No one has created a topic in this forum. Be the first and <a href="#" class="fmwp-create-topic fmwp-login-to-action">create a topic</a>.',"forumwp")+"</span>":'<span class="fmwp-forum-no-topics">'+wp.i18n.__("No one has created a topic in this forum.","forumwp")+"</span>",fmwp_no_topics_locked_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No one has created a topic in this forum.","forumwp")+"</span>",fmwp_no_topics_search_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No topics found for this search.","forumwp")+"</span>";function fmwp_get_topics_for_forum(o,a){fmwp_set_busy("individual_forum",!0);var p={forum_id:o.data("fmwp_forum_id"),page:a.page,order:a.order,nonce:fmwp_front_data.nonce};a.search&&(p.search=a.search),wp.ajax.send("fmwp_get_topics",{data:p,success:function(p){p.length?(o.siblings(".fmwp-topics-wrapper-heading").removeClass("fmwp-no-actions-heading"),jQuery("#tmpl-fmwp-topics-list").length&&(p=wp.template("fmwp-topics-list")({topics:p}),o.data("order",a.order),o.find(".fmwp-load-more").remove(),1===a.page?o.html(p+'<span class="fmwp-load-more"></span>'):o.append(p+'<span class="fmwp-load-more"></span>')),fmwp_topics_page=parseInt(a.page)+1):(o.find(".fmwp-load-more").remove(),1===a.page&&(a.search?o.html(fmwp_no_topics_search_template):o.parents(".fmwp-forum-wrapper").hasClass("fmwp-forum-locked")||o.parents(".fmwp-forum-wrapper").hasClass("fmwp-forum-pending")?o.html(fmwp_no_topics_locked_template):o.html(fmwp_no_topics_template),o.siblings(".fmwp-topics-wrapper-heading").addClass("fmwp-no-actions-heading"))),fmwp_set_busy("individual_forum",!1),wp.hooks.doAction("fmwp_topics_load_finish")},error:function(p){fmwp_set_busy("individual_forum",!1),console.log(p)}})}jQuery(document).ready(function(e){fmwp_embed_containers.push(".fmwp-forum-content"),e(".fmwp-forum-wrapper .fmwp-topics-wrapper").each(function(){var p=e(this).parents(".fmwp-forum-wrapper").find(".fmwp-forum-sort:visible").val();fmwp_get_topics_for_forum(e(this),{page:1,order:p})}),e(window).on("scroll",function(){var p,o,a={allow:!0,reallow:function(){a.allow=!0},delay:400};!fmwp_is_busy("individual_forum")&&a.allow&&(a.allow=!1,o=e(".fmwp-forum-wrapper .fmwp-topics-wrapper .fmwp-load-more"),p=e(".fmwp-forum-wrapper .fmwp-topics-wrapper").parents(".fmwp-forum-content").siblings(".fmwp-forum-head").data("fmwp_search"),o.length)&&(setTimeout(a.reallow,a.delay),o.offset().top-e(window).scrollTop()<1e3)&&(o=o.parents(".fmwp-forum-wrapper").find(".fmwp-forum-sort:visible").val(),fmwp_get_topics_for_forum(e(".fmwp-forum-wrapper .fmwp-topics-wrapper"),{page:fmwp_topics_page,order:o,search:p}))}),e(document.body).on("change",".fmwp-forum-sort",function(p){var o,a;p.preventDefault(),fmwp_is_busy("individual_forum")||(p=e(this).parents(".fmwp-forum-head").data("fmwp_forum_id"),p=e('.fmwp-topics-wrapper[data-fmwp_forum_id="'+p+'"]'),o=e(this).val(),a=p.parents(".fmwp-forum-content").siblings(".fmwp-forum-head").data("fmwp_search"),p.find(".fmwp-forum-sort").val(o),fmwp_get_topics_for_forum(p,{page:1,order:o,search:a}))}),e(document.body).on("click",".fmwp-search-toggle",function(p){p.preventDefault(),e(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").is(":visible")?(e(this).removeClass("fmwp-active"),e(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").css("display","none")):(e(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").css("display","flex"),e(this).addClass("fmwp-active"))}),e(document.body).on("click",".fmwp-search-topic",function(p){if(p.preventDefault(),!fmwp_is_busy("individual_forum")){var p=e(this).siblings("label").find(".fmwp-forum-search-line").val(),o=e(this).parents(".fmwp-forum-head").data("fmwp_search");if(void 0===o&&""===p||o===p)return!1;e(this).parents(".fmwp-forum-head").find(".fmwp-forum-search-line").val(p),e(this).parents(".fmwp-forum-head").data("fmwp_search",p);o=e(this).parents(".fmwp-forum-head").data("fmwp_forum_id");fmwp_get_topics_for_forum(e('.fmwp-topics-wrapper[data-fmwp_forum_id="'+o+'"]'),{page:1,order:e(this).parents(".fmwp-forum-head").find(".fmwp-forum-sort:visible").val(),search:p})}}),e(document.body).on("keypress",".fmwp-forum-search-line",function(p){13===p.which&&e(this).parents("label").siblings(".fmwp-search-topic").trigger("click")})});