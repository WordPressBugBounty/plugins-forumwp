var fmwp_topics_page=2,fmwp_no_topics_template=fmwp_front_data.can_topic?'<span class="fmwp-forum-no-topics">'+wp.i18n.__('No one has created a topic in this forum. Be the first and <a href="#" class="fmwp-create-topic fmwp-login-to-action">create a topic</a>.',"forumwp")+"</span>":'<span class="fmwp-forum-no-topics">'+wp.i18n.__("No one has created a topic in this forum.","forumwp")+"</span>",fmwp_no_topics_locked_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No one has created a topic in this forum.","forumwp")+"</span>",fmwp_no_topics_search_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No topics found for this search.","forumwp")+"</span>";function fmwp_get_topics(a,e){fmwp_set_busy("individual_forum",!0);var p={forum_id:a.data("fmwp_forum_id"),page:e.page,order:e.order,nonce:fmwp_front_data.nonce};e.search&&(p.search=e.search),wp.ajax.send("fmwp_get_topics",{data:p,success:function(p){p.length?(a.siblings(".fmwp-topics-wrapper-heading").removeClass("fmwp-no-actions-heading"),p=wp.template("fmwp-topics-list")({topics:p}),a.data("order",e.order),a.find(".fmwp-load-more").remove(),1===e.page?a.html(p+'<span class="fmwp-load-more"></span>'):a.append(p+'<span class="fmwp-load-more"></span>'),fmwp_topics_page=parseInt(e.page)+1):(a.find(".fmwp-load-more").remove(),1===e.page&&(e.search?a.html(fmwp_no_topics_search_template):a.parents(".fmwp-forum-wrapper").hasClass("fmwp-forum-locked")||a.parents(".fmwp-forum-wrapper").hasClass("fmwp-forum-pending")?a.html(fmwp_no_topics_locked_template):a.html(fmwp_no_topics_template),a.siblings(".fmwp-topics-wrapper-heading").addClass("fmwp-no-actions-heading"))),fmwp_set_busy("individual_forum",!1)},error:function(p){fmwp_set_busy("individual_forum",!1),console.log(p)}})}jQuery(document).ready(function(o){fmwp_embed_containers.push(".fmwp-forum-content"),o(".fmwp-topics-wrapper").each(function(){fmwp_get_topics(o(this),{page:1,order:o(this).data("order")})}),o(window).scroll(function(){var p,a,e={allow:!0,reallow:function(){e.allow=!0},delay:400};!fmwp_is_busy("individual_forum")&&e.allow&&(e.allow=!1,p=o(".fmwp-topics-wrapper .fmwp-load-more"),a=o(".fmwp-topics-wrapper").parents(".fmwp-forum-content").siblings(".fmwp-forum-head").data("fmwp_search"),p.length)&&(setTimeout(e.reallow,e.delay),p.offset().top-o(window).scrollTop()<1e3)&&fmwp_get_topics(o(".fmwp-topics-wrapper"),{page:fmwp_topics_page,order:o(".fmwp-topics-wrapper").data("order"),search:a})}),o(document.body).on("change",".fmwp-forum-sort",function(p){var a,e;p.preventDefault(),fmwp_is_busy("individual_forum")||(p=o(this).parents(".fmwp-forum-head").data("fmwp_forum_id"),p=o('.fmwp-topics-wrapper[data-fmwp_forum_id="'+p+'"]'),a=o(this).val(),e=p.parents(".fmwp-forum-content").siblings(".fmwp-forum-head").data("fmwp_search"),fmwp_get_topics(p,{page:1,order:a,search:e}))}),o(document.body).on("click",".fmwp-search-toggle",function(p){p.preventDefault(),o(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").is(":visible")?(o(this).removeClass("fmwp-active"),o(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").css("display","none")):(o(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").css("display","flex"),o(this).addClass("fmwp-active"))}),o(document.body).on("click",".fmwp-search-topic",function(p){if(p.preventDefault(),!fmwp_is_busy("individual_forum")){var p=o(this).siblings("label").find(".fmwp-forum-search-line").val(),a=o(this).parents(".fmwp-forum-head").data("fmwp_search");if(void 0===a&&""===p||a===p)return!1;o(this).parents(".fmwp-forum-head").find(".fmwp-forum-search-line").val(p),o(this).parents(".fmwp-forum-head").data("fmwp_search",p);a=o(this).parents(".fmwp-forum-head").data("fmwp_forum_id");fmwp_get_topics(o('.fmwp-topics-wrapper[data-fmwp_forum_id="'+a+'"]'),{page:1,order:o(this).parents(".fmwp-forum-head").find(".fmwp-forum-sort").val(),search:p})}}),o(document.body).on("keypress",".fmwp-forum-search-line",function(p){13===p.which&&o(this).parents("label").siblings(".fmwp-search-topic").trigger("click")})});