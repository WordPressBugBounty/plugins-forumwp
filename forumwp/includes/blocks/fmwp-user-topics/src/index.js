(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,o=window.wp.components,r=window.wp.serverSideRender;var s=e.n(r);const i=window.wp.blockEditor,n=window.wp.element,c=window.wp.data,p=window.ReactJSXRuntime;(0,t.registerBlockType)("fmwp-block/fmwp-user-topics",{edit:function(e){const t=(0,i.useBlockProps)(),{attributes:r,setAttributes:u}=e,{user_id:a}=r,d=(0,c.useSelect)((e=>e("core").getEntityRecords("root","user",{per_page:-1,_fields:["id","name","username"]})),[]);return(0,n.useMemo)((()=>{let e="[fmwp_user_topics";return a&&(e+=` user_id="${a}"`),e+="]",e}),[a]),(0,p.jsxs)("div",{...t,children:[(0,p.jsx)(s(),{block:"fmwp-block/fmwp-user-topics",attributes:r}),(0,p.jsx)(i.InspectorControls,{children:(0,p.jsx)(o.PanelBody,{title:wp.i18n.__("User Topics Settings","forumwp"),children:(0,p.jsx)(o.SelectControl,{label:wp.i18n.__("User","forumwp"),value:a,options:[{label:wp.i18n.__("Select a User","forumwp"),value:""},...d?d.map((e=>({label:e.name||e.username,value:e.id}))):[]],onChange:e=>u({user_id:e})})})})]})},save:()=>null}),jQuery(window).on("load",(function(){new MutationObserver((e=>{e.forEach((e=>{jQuery(e.addedNodes).find(".fmwp-user-topics").each((function(){jQuery(".fmwp-user-topics").each((function(){fmwp_user_topics(jQuery(this).find(".fmwp-topics-wrapper"),{page:1,user_id:jQuery(this).data("user_id")})}))}))}))})).observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0})})),wp.hooks.addAction("fmwp_user_topics_load_finish","fmwp_user_topics_load_finish_block",(()=>{const e=document.querySelector(".fmwp-user-topics");e&&e.addEventListener("click",(t=>{t.target!==e&&(t.preventDefault(),t.stopPropagation())}))}))})();